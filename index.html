<!DOCTYPE html>
<html lang="cn">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>空间站-周年赞助</title>
    <link rel="stylesheet" href="./css/sponsor.css">
    <link rel="stylesheet" href="./css/nav.css">
    <link rel="icon" href="https://sc2.nosdn.127.net/1/style/images/sc2.ico" type="image/x-icon"/>
</head>


<body>
    <div class="bg"></div>
    <div class="nav">
        <div class="logo"><img src="./assets//死亡空间站.png" alt=""></div>
        <ul>
            <!-- <li><a href="/">首页</a></li> -->
            <li><a href="/bulletin.html">公告</a></li>
            <li class="active"><a href="/index.html">活动</a></li>
            <!-- <li>文档</li> -->
        </ul>   
    </div>

    <div id="pageCenter">
        <div class="title">
            <!-- <p class="logo" style="width: 50%;"><img src="./assets//死亡空间站.png" alt=""></p> -->
            <p class="main">《死亡空间站2》限时赞助大促4.0</p>

            <!-- <span class="time">截止时间3月20日</span> -->
            <!-- <div class="rantInfo">
                <span class="white">
                <p class="must">排行榜前10名每人一个传奇随从【奥丁】</p>
            </div> -->
        </div>
        <div class="custom">
            <div class="block1">
                <img src="./assets/details/定制详情.png" alt="">
            </div>
            <div class="block2">
                <img src="./assets/details/赞助详情.png" alt="">
            </div>
        </div>
        <div id="List">
            <div class="awardMoney">

                <div class="box">
                    <img src="./assets/icon/死亡水晶.png" alt="">
                    <p class="hintTitle">600,000</p>
                </div>

                <span class="hintInfo">
                    奖池随全体累计赞助额度不断扩大,活动结束每个赞助玩家平分奖池
                </span>
                <span class="moneyInfo">
                    倒计时：30天 06小时 05分钟
                </span>
            </div>
            <div class="List_image">
                <div class="list_topImage"></div>
                <div class="list_bottomImage"></div>
            </div>
            <ul>
            </ul>
        </div>
    </div>
    <script>
        let subMoney = 0;
        let memberMoney = [
            {name: "ndisv",qq: 1340741651,date: "9-2",quota: 6},
            {name: "未转正的鱼咸咸",qq: 1636541569,date: "9-3",quota: 50},
            {name: "ndisv",qq: 1340741651,date: "9-3",quota: 30},
            {name: "千代的琪亚娜",qq: 2133649274,date: "9-3",quota: 6},
            {name: "明月清风",qq: 1731859534,date: "9-5",quota: 50},
            {name: "萌bao&果酱^",qq: 2756047249,date: "9-5",quota: 6},
            {name: "博丽李梦",qq: 1257701507,date: "9-5",quota: 6},
            {name: "萌bao&果酱^",qq: 2756047249,date: "9-5",quota: 50},
            {name: "电脑",qq: 2179885504,date: "9-6",quota: 50},
            {name: "冬马和纱！！！",qq: 1509885806,date: "9-6",quota: 6},
            {name: "走天涯",qq: 1120370209,date: "9-6",quota: 6},
            {name: "我想要陪你到终点",qq: 2840224643,date: "9-6",quota: 6},
            {name: "冬马和纱！！！",qq: 1509885806,date: "9-6",quota: 30},
            {name: "Y",qq: 3331386909,date: "9-7",quota: 6},
            {name: "Y",qq: 3331386909,date: "9-7",quota: 6},
            {name: "未转正的鱼咸咸",qq: 1636541569,date: "9-7",quota: 50},
            {name: "Emperor",qq: 1195330012,date: "9-7",quota: 50},
            {name: "九仙",qq: 565047123,date: "9-7",quota: 6},
            {name: "落雪",qq: 2514225604,date: "9-7",quota: 6},
            {name: "……",qq: 1810148909,date: "9-7",quota: 6},
            {name: "落雪",qq: 2514225604,date: "9-7",quota: 50},
            {name: "九仙",qq: 565047123,date: "9-7",quota: 50},
            {name: "明月清风",qq: 1731859534,date: "9-7",quota: 50},
            {name: "千代的琪亚娜",qq: 2133649274,date: "9-7",quota: 6},
            {name: "C.",qq: 1046413902,date: "9-8",quota: 6},
            {name: "乾坤一掷",qq: 2367735503,date: "9-8",quota: 6},
            {name: "一顿饭三个馒头",qq: 2897201969,date: "9-8",quota: 6},
            {name: "ndisv",qq: 1340741651,date: "9-8",quota: 200},
            {name: "Y",qq: 3331386909,date: "9-8",quota: 50},
            {name: "勿念他歸零靜",qq: 350118735,date: "9-8",quota: 12},
            {name: "谁戳我 谁女装",qq: 361525195,date: "9-8",quota: 500},
            {name: "QJH",qq: 2647058851,date: "9-8",quota: 50},
            {name: "希尔",qq: 861973601,date: "9-9",quota: 200},
            {name: "电脑",qq: 2179885504,date: "9-9",quota: 50},
            {name: "梦韵",qq: 211932642,date: "9-9",quota: 6},
            {name: "云野",qq: 1079019532,date: "9-9",quota: 56},
            {name: "永远的十一",qq: 1628993307,date: "9-10",quota: 24},
            {name: "instinct.初衷",qq: 2312411543,date: "9-10",quota: 6},
            {name: "覆水",qq: 3513436982,date: "9-10",quota: 12},
            {name: "大主教",qq: 1343449924,date: "9-10",quota: 6},
            {name: "德玛西亚",qq: 2567156437,date: "9-10",quota: 250},
            {name: "电脑",qq: 2179885504,date: "9-6",quota: 50},
            {name: "电脑",qq: 2179885504,date: "9-11",quota: 100},
            {name: "德玛西亚",qq: 2567156437,date: "9-11",quota: 6},
            {name: "萝北",qq: 708828846,date: "9-11",quota: 6},
            {name: "ndisv",qq: 1340741651,date: "9-11",quota: 650},
            {name: "我得重新集结部队了",qq: 2509013233,date: "9-6",quota: 6},
            {name: "萌bao&果酱^",qq: 2756047249,date: "9-12",quota: 400},
            {name: "云雾",qq: 469252226,date: "9-13",quota: 50},
            {name: "北岭",qq: 1298128524,date: "9-13",quota: 50},
            {name: "谭意铭",qq: 3303420073,date: "9-13",quota: 6},
            {name: "米老虫",qq: 2685610818,date: "9-13",quota: 6},
            {name: "Galahad",qq: 1124150844,date: "9-14",quota: 50},
            {name: "德玛西亚",qq: 2567156437,date: "9-14",quota: 250},
            {name: "萌bao&果酱^",qq: 2756047249,date: "9-14",quota: 550},
            {name: "谁戳我 谁女装",qq: 361525195,date: "9-14",quota: 550},
            {name: "萌bao&果酱^",qq: 2756047249,date: "9-14",quota: 100},
            {name: "肝帝～江少",qq: 2123295685,date: "9-14",quota: 100},
            {name: "咦↑↓~",qq: 703607486,date: "9-14",quota: 2},
            {name: "电脑",qq: 2179885504,date: "9-14",quota: 150},
            {name: "地狱神探",qq: 976002359,date: "9-14",quota: 50},
            {name: "QJH",qq: 2647058851,date: "9-9",quota: 20},
            {name: "谭意铭",qq: 3303420073,date: "9-15",quota: 12},
            {name: "肝帝～江少",qq: 2123295685,date: "9-15",quota: 255},
            {name: "樱子",qq: 3166882510,date: "9-15",quota: 200},
            {name: "Elasi",qq: 1124150844,date: "9-15",quota: 100},
            {name: "爱露",qq: 3538496156,date: "9-15",quota: 2},
            {name: "轩",qq: 718187270,date: "9-15",quota: 50},
            {name: "爱露",qq: 3538496156,date: "9-15",quota: 22},
            {name: "萌bao&果酱^",qq: 2756047249,date: "9-16",quota: 600},
            {name: "ndisv",qq: 1340741651,date: "9-16",quota: 550},
            {name: "←_←",qq: 2671400858,date: "9-17",quota: 6},
            {name: "阿珏没睡醒",qq: 2644982732,date: "9-17",quota: 501},
            {name: "不正经的火柴",qq: 2671400858,date: "9-18",quota: 600},
            {name: "南月谣",qq: 3230411246,date: "9-18",quota: 300},
            {name: "樱子",qq: 3166882510,date: "9-18",quota: 100},
            {name: "Emperor",qq: 1195330012,date: "9-18",quota: 100},
            {name: "肝帝～江少",qq: 2123295685,date: "9-18",quota: 130},
            {name: "轩",qq: 718187270,date: "9-18",quota: 200},
            {name: "参商",qq: 2445574898,date: "9-18",quota: 10},
            {name: "阿珏没睡醒",qq: 2644982732,date: "9-19",quota: 1220},

        ]
        // 根据数组自动化创建列表元素
        function initList(){
            let ListUl = document.querySelector("#List>ul");
            for(let i=0;i<memberRant.length;i++){
                let memberObj = memberRant[i];
                subMoney+=memberObj.quota;
                // 创建li
                let li = document.createElement("li");
                // 创建头像
                let img = document.createElement("img");
                img.classList.add("header");
                img.src = `https://q4.qlogo.cn/g?b=qq&nk=${memberObj.qq}&s=140`;
                // 创建信息块
                let info = document.createElement("div");
                info.classList.add("info");
                    // 创建用户名
                    let userName = document.createElement("p");
                    userName.classList.add("userName");
                    userName.innerText = memberObj.name;
                    // 创建用户QQ
                    let userqq = document.createElement("p");
                    userqq.classList.add("qq");
                    userqq.innerText = memberObj.qq;
                    // 创建额度
                    let usermoney = document.createElement("p");
                    usermoney.classList.add("money");
                    usermoney.innerText = memberObj.quota + "¥";
                // 创建排行序号
                let userindex = document.createElement("div");
                userindex.classList.add("index");
                userindex.innerText = i+1;

                let AwardBlock = document.createElement("div");
                AwardBlock.classList.add("AwardBlock");
                let AwardSpan = document.createElement("span");
                AwardSpan.innerHTML = memberObj.award;
                AwardBlock.appendChild(AwardSpan);

                // 整合元素
                info.appendChild(userName);
                info.appendChild(userqq);
                info.appendChild(usermoney);
                li.appendChild(img);
                li.appendChild(info);
                li.appendChild(AwardBlock);
                li.appendChild(userindex);
                ListUl.appendChild(li);
            }
            let hintTitle = document.querySelector('.hintTitle');
            // hintTitle.innerText = numFormat(subMoney * 1000);
            hintTitle.innerHTML = `<p class='small'>瓜分</p> <p class='numberMoney'> ${subMoney* 1000}</p> <p class='small'>水晶</p>`;
            console.log(subMoney);
        }
        function numFormat(num){
            num=num.toString().split(".");  // 分隔小数点
            var arr=num[0].split("").reverse();  // 转换成字符数组并且倒序排列
            var res=[];
            for(var i=0,len=arr.length;i<len;i++){
            if(i%3===0&&i!==0){
                res.push(",");   // 添加分隔符
            }
            res.push(arr[i]);
            }
            res.reverse(); // 再次倒序成为正确的顺序
            if(num[1]){  // 如果有小数的话添加小数部分
            res=res.join("").concat("."+num[1]);
            }else{
            res=res.join("");
            }
            return res;
        }

        let memberRant = [];
        // 合并记录至QQ为单位下的数据
        function initRant(){
            // 检索所有记录
            for (let index = 0; index < memberMoney.length; index++) {
                let member = memberMoney[index];
                let isExist = false;
                // 检索现有排行是否已经有记录
                for (let j = 0; j < memberRant.length; j++) {
                    let rant = memberRant[j];
                    if(rant.qq == member.qq){
                        rant.quota += member.quota;
                        isExist = true;
                        break;
                    }
                }
                if(!isExist){
                    memberRant.push(member);
                }
            }
        }
        // 对赞助数据进行排序
        function initRantSort(){
            memberRant = memberRant.sort(function(a,b){
                return  b.quota - a.quota;
            })
        }
        function SetAward(){
            memberRant.forEach((item,i)=>{
                // console.log(item,i);
                item.award = "";
                let index = i+1;
                let stone = 0;
                let package = 0;
                if(index <=3){
                    item.award += " <p style='color:red'><img src='./assets/icon/利维坦.png' />传奇随从【利维坦】</p>"
                }

                // if(index<=3){
                //     item.award += " <span style='color:gold'>传奇随从【闪耀凯瑞甘】</span>"
                // }

                if(index<=10){
                    item.award += " <p style='color:tomato'><img src='./assets/icon/弹头哥.png' />传奇随从【弹头哥】</p>"
                    // item.award += " <p style='color:gold'><img src='./assets/icon/死亡水晶.png' />A级限定专属定制装备</p>"
                }
                if(index<=3  && index != 1){
                    item.award += " <p style='color:gold'><img src='./assets/icon/飞升.png' />英雄精通150飞升包</p>"
                    item.award += " <p style='color:gold'><img src='./assets/icon/SSS.png' />S专属定制装备</p>"
                }
                if(index == 1){
                    item.award += " <p style='color:gold'><img src='./assets/icon/飞升.png' />精通150飞升包</p>"
                    item.award += " <p style='color:gold'><img src='./assets/icon/飞升.png' />精通150飞升包</p>"
                    item.award += " <p style='color:gold'><img src='./assets/icon/飞升.png' />精通150飞升包</p>"
                    item.award += " <p style='color:gold'><img src='./assets/icon/SSS.png' />SSS限定专属定制装备</p>"

                }
                stone = (memberRant.length - i ) * 250;
                if(index <= 3){
                    stone += (3 - i )* 5000;
                    stone += item.quota * 100;
                }
                item.award += " <p style='color:skyblue'><img src='./assets/icon/死亡水晶.png' />" + numFormat(stone) + "死亡水晶</p>";
                item.award += " <p style='color:skyblue'><img src='./assets/icon/时空币.png' />" + numFormat(item.quota * 3000) + "时空币</p>";
                item.award += " <p style='color:gold'><img src='./assets/icon/时空币.png' />" + "荣誉勋章</p>";
                item.award += " <p style='color:gold'><img src='./assets/icon/平分.png' />" + "[平分奖池权]</p>";
            })
        }
        initRant();
        initRantSort();
        SetAward();
        initList();
    </script>
</body>

</html>